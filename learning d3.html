<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <style>
        rect {
            fill: red;
        }
    </style>
    <script src="d3.min.js" type="text/javascript"></script>
</head>

<body>
    <svg>
    </svg>

    <script>
    var dataSet = [5, 3, 7];

    function updateData() {
        dataSet[Math.floor(Math.random() * dataSet.length)] = Math.random() * 10;
        redraw();
    }

    function redraw() {
        var rects = d3.select('svg').selectAll('rect').data(dataSet);

        // Enter
        rects.enter()
            .append('rect')
            .attr('x', 10)
            .attr('width', 0)
            .attr('height', 10);

        // Exit
        rects.exit()
            .remove();

        // Update
        rects
            .attr('y', function(_, i) {return 10 + i * 20;})
            .transition()
            .attr('width', function(d) {return d * 30;});
    }
        
    window.setInterval(updateData, 1000);
    </script>
</body>

</html>
<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="https://developer.mozilla.org/en-US/docs/Template:CustomSampleCSS?raw=1">
    <script type="text/javascript">
        window.addEventListener('load', main);
        var Beaver = function (x, y, img, ctx) {
            this.x = x;
            this.y = y;
            this.img = img;
            this.ctx = ctx;
            this.sticks = 0;
        };

        Beaver.prototype.draw = function () {
            this.y = Math.min(Math.max(0, this.y), this.ctx.canvas.height - 150);
            var w = 100;
            this.ctx.drawImage(this.img, this.x, this.y, w, w / this.img.width * this.img.height);
        };

        Beaver.prototype.hop = function () {
            this.y -= 5;
        };

        Beaver.prototype.fall = function () {
            this.y += 5;
        };

        Beaver.prototype.checkForStickGrab = function (stick) {
            if ((stick.x >= this.x && stick.x <= (this.x + 40)) &&
                (stick.y >= this.y && stick.y <= (this.y + 40))) {
                stick.y = -400;
                this.sticks++;
            }
        };

        var Stick = function (x, y, img, ctx) {
            this.x = x;
            this.y = y;
            this.img = img;
            this.ctx = ctx;
        };

        Stick.prototype.draw = function () {
            var w = 100;
            this.ctx.drawImage(this.img, this.x, this.y, w, w / this.img.width * this.img.height);
        };

        function main() {            
            var canvas = document.getElementById('canvas');
            var ctx = canvas.getContext('2d');
            var img1 = document.getElementById('player');
            var img2 = document.getElementById('dog');
            //img.src ='https://66.media.tumblr.com/df22326a6a8b900fe13c3d2ce941fe17/tumblr_o6sct4tzkD1urebxho3_400.png';
            //img.src ='https://67.media.tumblr.com/0f2552bd68f15e2823b4b96338c8d405/tumblr_o6sct4tzkD1urebxho2_250.png';
            //img.src ='https://66.media.tumblr.com/4fd47c59aea9023bf42ca46db7524cf9/tumblr_o6sct4tzkD1urebxho1_250.png';
            var beaver = new Beaver(200, 300, img1, ctx);
            
            var sticks = [];
            for (var i = 0; i < 40; i++) {
                sticks.push(new Stick(i * 40 + 300, Math.random() * 240 + 20, img2, ctx));
            }

            var grassXs = [];
            for (var i = 0; i < 25; i++) {
                grassXs.push(i * 20);
            }

            draw();

            function draw() {
                for (var i = 0; i < sticks.length; i++) {
                    sticks[i].draw();
                    beaver.checkForStickGrab(sticks[i]);
                    sticks[i].x -= 1;
                }
                if (keyIspressed && keyCode === 32) {
                    beaver.hop();
                } else {
                    beaver.fall();
                }
                beaver.draw();
            }
        }
    </script>
</head>

<body>
    <canvas id="canvas" style="border: 1px solid" width="700" height="500"></canvas>

    <img src="http://67.media.tumblr.com/bcdbb14d8b04d2c8746fee74756e74f6/tumblr_o6scc7lhN11urebxho1_100.png" id="player" style="display: none" />
    <img src="https://66.media.tumblr.com/4fd47c59aea9023bf42ca46db7524cf9/tumblr_o6sct4tzkD1urebxho1_250.png" id="dog" style="display: none" />
</body>

</html>